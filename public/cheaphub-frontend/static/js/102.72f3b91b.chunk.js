(this.webpackJsonpSeamless=this.webpackJsonpSeamless||[]).push([[102],{1748:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(20),s=a(3),c=a.n(s),i=a(1),u=a(96),o=a(499),l=a.n(o),p=a(509),d=a.n(p),f=a(984),m=a(497),h=a.n(m),b=a(493);function g(e,t,a){return x.apply(this,arguments)}function x(){return(x=Object(n.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).method="GET",r.authentication=!0,r.isBasicAuth=!1,r.urlencoded=!1,r.endpoint="estimations/yarn-requirements/within/".concat(a,"/").concat(n,"?page=").concat(t,"&size=10"),r.body=null,r.multipart=!1,e.next=10,b.a.callApi(r);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return w.apply(this,arguments)}function w(){return(w=Object(n.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={}).method="GET",n.authentication=!0,n.isBasicAuth=!1,n.urlencoded=!1,n.endpoint="estimations/yarn-requirements/within/".concat(t,"/").concat(a),n.body=null,n.multipart=!1,e.next=10,b.a.callApi(n);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=a(490),v=a(72),k=a(136),y=a(557),S=a(14),N=a(34),C=function(e){e.picker;var t=e.onChange,a=e.onClose,n=e.csvList,r=e.csvAction,s=e.fileName;return Object(S.jsx)(u.l,{children:Object(S.jsxs)("div",{className:"invoice-list-table-header w-100 py-2 px-1 m-0",style:{whiteSpace:"nowrap"},children:[Object(S.jsx)("h3",{className:"text-primary invoice-logo mb-2",children:"Material Requirements Planing"}),Object(S.jsx)(u.ib,{children:Object(S.jsxs)(u.B,{lg:"6",className:"d-flex align-items-center px-0 px-lg-1 justify-content-between w-100 align-items-center",children:[Object(S.jsxs)("div",{className:"d-flex align-items-center w-100",children:[Object(S.jsx)(u.N,{className:"form-label",for:"default-picker",children:"Requirements for upcoming due orders"}),Object(S.jsx)(l.a,{id:"range-picker",className:"form-control ms-1",onChange:t,style:{width:210},options:{mode:"range",showMonths:2,defaultDate:[new Date,new Date((new Date).setMonth((new Date).getMonth()+1))]},onClose:a})]}),0!==n.length&&Object(S.jsx)(y.CSVLink,{headers:[{label:"Supplier",key:"supplier"},{label:"Article",key:"article"},{label:"Twist",key:"twist"},{label:"Weight (kg)",key:"weight"}],target:"_blank",data:n,className:"btn btn-primary",asyncOnClick:!0,onClick:r,filename:s,children:"Export CSV"})]})})]})})},A=[{name:"Supplier",width:"30%",center:!0,cell:function(e){return e.supplierName}},{name:"Article",width:"30%",center:!0,cell:function(e){return e.articleName}},{width:"20%",name:"Twist",center:!0,cell:function(e){return e.twist}},{width:"20%",name:Object(S.jsxs)("span",{children:["Weight ",Object(S.jsx)("span",{className:"text-lowercase",children:"(Kg)"})]}),center:!0,cell:function(e){return Object(O.r)(Number(e.articleWeightWithFallout)/1e3)}}];t.default=function(){var e=Object(v.b)(),t=Object(i.useState)(""),a=Object(r.a)(t,2),s=a[0],o=(a[1],Object(i.useState)(0)),l=Object(r.a)(o,2),p=l[0],m=(l[1],Object(i.useState)("")),b=Object(r.a)(m,2),x=b[0],w=(b[1],Object(i.useState)(10)),y=Object(r.a)(w,2),D=y[0],_=(y[1],Object(i.useState)([])),E=Object(r.a)(_,2),T=E[0],Y=E[1],P=Object(i.useState)(""),M=Object(r.a)(P,2),L=M[0],R=M[1],B=Object(i.useState)({allData:[],data:[],params:{page:0,currentPage:0},total:0}),K=Object(r.a)(B,2),q=K[0],H=K[1],F=Object(i.useState)([]),W=Object(r.a)(F,2),I=W[0],z=W[1],G=Object(i.useState)(!1),J=Object(r.a)(G,2),U=J[0],V=J[1],Q=function(){var t=Object(n.a)(c.a.mark((function t(a,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(k.b)()),t.next=3,g(n.page,N(a[0]).format("YYYY-MM-DD"),N(a[1]).format("YYYY-MM-DD")).then((function(t){t.success?H({allData:t.data.content,data:t.data.content,params:n,total:t.data.totalPages}):Object(O.c)(t.data.title,t.status),e(Object(k.b)()),V(!0)}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),X=function(){var e=Object(n.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(N(t[0]).format("YYYY-MM-DD"),N(t[1]).format("YYYY-MM-DD")).then((function(e){if(e.success){var t=[];e.data.content.map((function(e){t.push({supplier:e.supplierName,article:e.articleName,twist:e.twist,weight:Object(O.r)(Number(e.articleWeightWithFallout)/1e3).toString()})})),console.log(t),z(t)}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)(Object(n.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=new Date(t.setMonth(t.getMonth()+1)),n=[new Date,a],Y(n),e.next=6,Q(n,{page:0,currentPage:0});case 6:return e.next=8,X(n);case 8:case"end":return e.stop()}}),e)}))),[]);var Z=function(){var e=Object(n.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(T,{page:t.selected,currentPage:t.selected+1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(i.Fragment,{children:Object(S.jsxs)("div",{children:[Object(S.jsx)(C,{picker:T,onChange:function(){var e=Object(n.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==t.length){e.next=6;break}return Y(t),e.next=4,Q(t,{page:0,currentPage:0});case 4:return e.next=6,X(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onClose:function(e,t,a){1===e.length&&a.setDate([T[0],T[1]],!0)},csvList:I,csvAction:function(){return R(O.i)},fileName:"MaterialRequirementReport_".concat(L,".csv")}),Object(S.jsxs)(u.l,{className:"mt-2",children:[Object(S.jsx)("h4",{className:"text-primary invoice-logo m-2",children:"Yarn Requirement"}),Object(S.jsx)("div",{className:"invoice-list-dataTable react-dataTable",children:Object(S.jsx)(d.a,{noHeader:!1,pagination:!0,sortServer:!0,paginationServer:!0,subHeader:!0,columns:A,responsive:!0,onSort:function(){},data:function(){var e,t,a={q:s,status:x},n=Object.keys(a).some((function(e){return a[e].length>0}));return(null===(e=q.data)||void 0===e?void 0:e.length)>0?q.data:0===(null===(t=q.data)||void 0===t?void 0:t.length)&&n?[]:q.allData.slice(0,D)}(),sortIcon:Object(S.jsx)(f.a,{}),className:"dataTables_wrapper",paginationDefaultPage:p,paginationComponent:function(){return Object(S.jsx)(h.a,{nextLabel:"",breakLabel:"...",previousLabel:"",pageCount:q.total||1,activeClassName:"active",breakClassName:"page-item",pageClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",pageLinkClassName:"page-link",nextClassName:"page-item next",previousLinkClassName:"page-link",previousClassName:"page-item prev",onPageChange:function(e){return Z(e)},forcePage:0!==q.params.currentPage?q.params.currentPage-1:0,containerClassName:"pagination react-paginate justify-content-end p-1"})},customStyles:{subHeader:{style:{display:"none"}}},noDataComponent:Object(O.d)(U)})})]})]})})}},493:function(e,t,a){"use strict";var n,r=a(8),s=a(3),c=a.n(s),i=a(7),u=a.n(i),o={serverUrl:"http://154.53.41.231",basePath:"api/v1",redirect:""},l=a(134),p=a(490),d=a(518),f=a(578),m=a.n(f),h={},b=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={refresh_token:localStorage.getItem(l.f.REFRESH_TOKEN),grant_type:"refresh_token"},e.next=3,d.c(m.a.stringify(n)).then(function(){var e=Object(r.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.access_token){e.next=10;break}return Cookies.set(l.f.ACCESS_TOKEN,n.access_token),localStorage.setItem(l.f.ACCESS_TOKEN,n.access_token),Cookies.set(l.f.REFRESH_TOKEN,n.refresh_token),localStorage.setItem(l.f.REFRESH_TOKEN,n.refresh_token),e.next=7,g(t);case 7:a=e.sent,e.next=15;break;case 10:return e.next=12,p.q();case 12:return e.next=14,p.a();case 14:window.location.reload();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,s,i,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"post"!==(a=t.method?t.method.toLowerCase():"get")&&"put"!==a&&"patch"!==a||(h=t.body?t.body:{}),n={"Content-Type":t.urlencoded?"application/x-www-form-urlencoded":t.multipart?"multipart/form-data":"application/json"},t.authentication&&(s=localStorage.getItem(l.f.ACCESS_TOKEN))&&(n.Authorization="Bearer ".concat(s)),t.isBasicAuth&&(n.Authorization="Basic"),i="".concat(o.serverUrl,"/").concat(o.basePath,"/").concat(t.endpoint),e.next=8,u.a[a](i,"get"!==a&&"delete"!==a?h:{headers:n},{headers:n}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.status,d=204===a?{data:{},status:null,success:!1,message:""}:{data:""===t.data?[]:t.data,status:"Success"===t.data.message||"OK"===t.data.message?1:0,success:"Success"===t.data.message||"OK"===t.data.message||void 0===t.data.message,message:t.data.message};case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=39;break}if(void 0!==t.response){e.next=7;break}return e.next=4,{success:!1,status:0,message:"Your connection was interrupted",data:null};case 4:d=e.sent,e.next=37;break;case 7:if(401!==t.response.status){e.next=16;break}return e.next=10,{success:!1,status:0,message:t.response.data.message,data:null};case 10:return d=e.sent,e.next=13,Object(p.a)();case 13:window.location.reload(),e.next=37;break;case 16:if(403!==t.response.status){e.next=22;break}return e.next=19,{success:!1,status:2,message:"Access is denied.",data:null};case 19:d=e.sent,e.next=37;break;case 22:if(417!==t.response.status&&404!==t.response.status){e.next=28;break}return e.next=25,{success:!1,status:0,message:"Oops! Something went wrong.",data:null};case 25:d=e.sent,e.next=37;break;case 28:if(void 0===t.response.data){e.next=34;break}return e.next=31,{success:!1,status:0,message:t.response.data.message,data:null};case 31:d=e.sent,e.next=37;break;case 34:return e.next=36,{success:!1,status:2,message:"Sorry, something went wrong.",data:null};case 36:d=e.sent;case 37:e.next=42;break;case 39:return e.next=41,{success:!1,status:2,message:"Your connection was interrupted!",data:null};case 41:d=e.sent;case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a={callApi:g,renewTokenHandler:b}},518:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return p}));var n=a(8),r=a(3),s=a.n(r),c=a(493);function i(e){return u.apply(this,arguments)}function u(){return(u=Object(n.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).method="POST",a.authentication=!1,a.isBasicAuth=!0,a.urlencoded=!0,a.endpoint="authorize",a.body=t,a.multipart=!1,a.state="renewToken",a.grant_type="refresh_token",e.next=12,c.a.callApi(a);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return(l=Object(n.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).method="POST",a.authentication=!1,a.isBasicAuth=!1,a.urlencoded=!1,a.endpoint="login",a.body=t,a.multipart=!1,a.state="login",a.grant_type="password",e.next=12,c.a.callApi(a);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=Object(n.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).method="POST",a.authentication=!0,a.isBasicAuth=!1,a.urlencoded=!1,a.endpoint="account/change-password",a.body=t,a.multipart=!1,e.next=10,c.a.callApi(a);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},579:function(e,t){}}]);
//# sourceMappingURL=102.72f3b91b.chunk.js.map